<h1>‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Verdaccio (Private NPM Registry)</h1>
<p>
    Verdaccio ‡πÄ‡∏õ‡πá‡∏ô Lightweight Private NPM Proxy Registry ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢ Node.js ‡∏°‡∏±‡∏ô‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô "‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå NPM ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß" ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
</p>
<div class="image-container">
    
    <p>Verdaccio Web UI ‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à‡∏ó‡∏µ‡πà‡πÇ‡∏Æ‡∏™‡∏ï‡πå‡πÑ‡∏ß‡πâ</p>
</div>

<h2>1. ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Verdaccio?</h2>
<p>
    ‡πÉ‡∏ô‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£ DevOps ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Dependencies (‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à) ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏¥‡πà‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç Verdaccio ‡∏ä‡πà‡∏ß‡∏¢‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ô‡∏µ‡πâ‡πÇ‡∏î‡∏¢:
</p>
<ul>
    <li>
        <strong>üöÄ Caching (‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß):</strong> ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏£‡∏±‡∏ô <code>npm install</code> ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å Verdaccio ‡∏à‡∏∞‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à‡∏à‡∏≤‡∏Å npmjs.org ‡∏°‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÉ‡∏ô Cache ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏ô‡πÉ‡∏ô‡∏ó‡∏µ‡∏°‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏û‡∏ß‡∏Å‡πÄ‡∏Ç‡∏≤‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à‡∏à‡∏≤‡∏Å Server ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô LAN ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
    </li>
    <li>
        <strong>üîê Security (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢):</strong> ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞ Publish "‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß" (Private Packages) ‡∏Ç‡∏≠‡∏á‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó (‡πÄ‡∏ä‡πà‡∏ô <code>@vecskill/common-ui</code>) ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡πÑ‡∏î‡πâ ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡∏π‡πà‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞
    </li>
    <li>
        <strong> offline (‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå):</strong> ‡∏´‡∏≤‡∏Å Server ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï‡πÑ‡∏î‡πâ <code>npm install</code> ‡∏à‡∏∞‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å Cache ‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß
    </li>
</ul>

<h2>2. ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏î‡πà‡∏ô (Features)</h2>
<ul>
    <li>‡πÄ‡∏õ‡πá‡∏ô Private NPM Registry ‡∏ó‡∏µ‡πà‡πÄ‡∏ö‡∏≤ (Lightweight)</li>
    <li>‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô Proxy ‡πÅ‡∏•‡∏∞ Cache ‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö Public Registry (‡πÄ‡∏ä‡πà‡∏ô npmjs.org)</li>
    <li>‡∏°‡∏µ Web UI ‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à</li>
    <li>‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£ Authentication (‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ä‡πâ <code>.htpasswd</code>)</li>
    <li>‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Scoped Packages (‡πÄ‡∏ä‡πà‡∏ô <code>@my-org/package</code>)</li>
</ul>

<h2>3. ‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (Limitations)</h2>
<ul>
    <li>
        <strong>Storage:</strong> ‡πÇ‡∏î‡∏¢‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô Verdaccio ‡∏à‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à‡πÑ‡∏ß‡πâ‡∏ö‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏ü‡∏•‡πå (Filesystem) ‡∏ã‡∏∂‡πà‡∏á‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏ô‡∏ó‡∏≤‡∏ô‡∏™‡∏π‡∏á (High Availability)
    </li>
    <li>
        <strong>Authentication:</strong> ‡∏£‡∏∞‡∏ö‡∏ö‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (<code>htpasswd</code>) ‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏á‡πà‡∏≤‡∏¢ ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö LDAP ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏∞‡∏ö‡∏ö Auth ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å ‡∏≠‡∏≤‡∏à‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Plugin ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°
    </li>
</ul>

<hr style="margin: 40px 0;">

<h2>4. ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á</h2>
<p>‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏î‡πâ 2 ‡∏ß‡∏¥‡∏ò‡∏µ‡∏´‡∏•‡∏±‡∏Å:</p>

<h3>4.1 ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏ú‡πà‡∏≤‡∏ô Portainer Stack (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)</h3>
<p>
    ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ô‡∏µ‡πâ‡∏á‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡∏™‡∏∞‡∏≠‡∏≤‡∏î ‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏ú‡πà‡∏≤‡∏ô Portainer
</p>
<h4>4.1.1 ‡∏™‡∏£‡πâ‡∏≤‡∏á Docker Volumes</h4>
<pre><code>docker volume create verdaccio_conf
docker volume create verdaccio_storage</code></pre>
<h4>4.1.2 ‡∏™‡∏£‡πâ‡∏≤‡∏á Stack (`verdaccio-stack`)</h4>
<p>
    ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Portainer > Stacks > + Add stack, ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠ (‡πÄ‡∏ä‡πà‡∏ô `verdaccio-stack`) ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ä‡πâ‡πÇ‡∏Ñ‡πâ‡∏î Docker Compose ‡∏ô‡∏µ‡πâ:
</p>
<pre><code>version: '3.8'

services:
  verdaccio:
    image: verdaccio/verdaccio:latest
    container_name: verdaccio
    restart: unless-stopped
    networks:
      - app_net
    ports:
      - "4873:4873" # Port ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á Verdaccio
    volumes:
      - verdaccio_conf:/verdaccio/conf
      - verdaccio_storage:/verdaccio/storage
    environment:
      - TZ=Asia/Bangkok
      - VERDACCIO_PORT=4873
    
networks:
  app_net:
    external: true
    
volumes:
  verdaccio_conf:
    external: true
  verdaccio_storage:
    external: true
</code></pre>
<p>
    ‡πÄ‡∏°‡∏∑‡πà‡∏≠ Deploy ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á Web UI ‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà <code>http://[IP_SERVER_‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì]:4873</code>
</p>

<hr style="margin: 20px 0;">

<h3>4.2 ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏ö‡∏ô Server ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á (Native Install)</h3>
<p>
    ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ô‡∏µ‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô Verdaccio ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡∏ö‡∏ô Host OS ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ Node.js ‡πÅ‡∏•‡∏∞ Systemd
</p>
<h4>4.2.1 ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Node.js (LTS)</h4>
<p>Verdaccio ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ Node.js ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô LTS ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î:</p>
<pre><code>sudo apt-get update
sudo apt-get install -y ca-certificates curl gnupg
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs</code></pre>

<h4>4.2.2 ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Verdaccio</h4>
<p>‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Verdaccio ‡πÅ‡∏ö‡∏ö Global ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ `npm`:</p>
<pre><code># -g ‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ö‡∏ö Global
sudo npm install -g verdaccio@5</code></pre>

<h4>4.2.3 ‡∏™‡∏£‡πâ‡∏≤‡∏á User ‡πÅ‡∏•‡∏∞‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå</h4>
<p>‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á User `verdaccio` ‡πÅ‡∏¢‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏´‡∏≤‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏±‡∏ô Service:</p>
<pre><code># ‡∏™‡∏£‡πâ‡∏≤‡∏á user ‡πÅ‡∏•‡∏∞ group ‡∏ä‡∏∑‡πà‡∏≠ verdaccio (‡πÅ‡∏ö‡∏ö system)
sudo adduser --system --group --home /srv/verdaccio verdaccio

# ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö config, storage (packages), ‡πÅ‡∏•‡∏∞ htpasswd
sudo mkdir -p /srv/verdaccio/{storage,plugins}
sudo mkdir -p /etc/verdaccio
sudo touch /srv/verdaccio/htpasswd

# ‡πÇ‡∏≠‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÉ‡∏´‡πâ user verdaccio
sudo chown -R verdaccio:verdaccio /srv/verdaccio /etc/verdaccio
</code></pre>

<h4>4.2.4 ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå Config (`config.yaml`)</h4>
<p>
    Verdaccio ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÑ‡∏ü‡∏•‡πå Config ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô‡πÅ‡∏•‡∏∞‡∏à‡∏∞‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£
</p>
<pre><code>sudo nano /etc/verdaccio/config.yaml</code></pre>
<p>‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡∏ß‡∏≤‡∏á (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: YAML ‡πÑ‡∏ß‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏¢‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤):</p>
<pre><code class="language-yaml"># ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à
storage: /srv/verdaccio/storage
# ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡∏õ‡∏•‡∏±‡πä‡∏Å‡∏≠‡∏¥‡∏ô
plugins: /srv/verdaccio/plugins

# ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Web UI
web:
  title: Verdaccio Private NPM

# ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô (‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏•‡πå htpasswd ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ)
auth:
  htpasswd:
    file: /srv/verdaccio/htpasswd
    max_users: 1000

# ‡∏Å‡∏≥‡∏´‡∏ô‡∏î Proxy ‡πÑ‡∏õ‡∏¢‡∏±‡∏á npmjs.org
uplinks:
  npmjs:
    url: https://registry.npmjs.org/

# ‡∏Å‡∏é‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à
packages:
  # ‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à‡∏ó‡∏µ‡πà‡∏°‡∏µ @scope (‡πÄ‡∏ä‡πà‡∏ô @vecskill/...)
  '@*/*':
    access: $authenticated
    publish: $authenticated
    proxy: npmjs
  
  # ‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
  '**':
    access: $all
    publish: $authenticated
    proxy: npmjs

# Port ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÉ‡∏´‡πâ Service ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å IP)
listen: 0.0.0.0:4873
</code></pre>

<h4>4.2.5 ‡∏™‡∏£‡πâ‡∏≤‡∏á Systemd Service File</h4>
<p>‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå Service ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ `systemd` ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°/‡∏´‡∏¢‡∏∏‡∏î Service ‡πÑ‡∏î‡πâ</p>
<pre><code>sudo nano /etc/systemd/system/verdaccio.service</code></pre>
<p>‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡∏ß‡∏≤‡∏á:</p>
<pre><code>[Unit]
Description=Verdaccio Private NPM Registry
After=network.target

[Service]
User=verdaccio
Group=verdaccio
# ‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏ü‡∏•‡πå config ‡∏ú‡πà‡∏≤‡∏ô Environment Variable
Environment=VERDACCIO_CONFIG_PATH=/etc/verdaccio/config.yaml
# ‡∏´‡∏≤‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á verdaccio (‡∏õ‡∏Å‡∏ï‡∏¥‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà /usr/bin/verdaccio ‡∏´‡∏£‡∏∑‡∏≠ /usr/lib/node_modules/verdaccio/bin/verdaccio)
ExecStart=/usr/bin/verdaccio --config ${VERDACCIO_CONFIG_PATH}
Restart=on-failure

[Install]
WantedBy=multi-user.target
</code></pre>

<h4>4.2.6 ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Service</h4>
<pre><code>sudo systemctl daemon-reload
sudo systemctl enable --now verdaccio
sudo systemctl status verdaccio</code></pre>
<p>‡∏´‡∏≤‡∏Å Service ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (active/running) ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á Web UI ‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà <code>http://[IP_SERVER_‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì]:4873</code> ‡πÄ‡∏ä‡πà‡∏ô‡∏Å‡∏±‡∏ô</p>

<hr style="margin: 40px 0;">

<h2>5. (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥) ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö Caddy</h2>
<p>
    ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏î‡πâ‡∏ß‡∏¢ HTTPS ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô ‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏° Block ‡∏ô‡∏µ‡πâ‡πÉ‡∏ô <code>/opt/caddy/Caddyfile</code> ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
</p>
<p>
    <strong>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å <code>reverse_proxy</code> ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ß‡∏¥‡∏ò‡∏µ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:</strong>
</p>
<pre><code># ---------- NPM (Verdaccio) ----------
npm.vecskill.ovec {
	tls internal
	encode zstd gzip
	header {
		Strict-Transport-Security "max-age=31536000;"
	}
	log {
		output file /var/log/caddy/npm_access.log
	}
    
    # --- ‡∏´‡∏≤‡∏Å‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏î‡πâ‡∏ß‡∏¢ Docker Stack (‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1) ---
	reverse_proxy http://verdaccio:4873

    # --- ‡∏´‡∏≤‡∏Å‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ö‡∏ö Native (‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2) ---
    # reverse_proxy http://127.0.0.1:4873
}
</code></pre>
<p>
    ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏° Reload Caddy ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ DNS ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏´‡πâ <code>npm.vecskill.ovec</code> ‡∏ä‡∏µ‡πâ‡∏°‡∏≤‡∏ó‡∏µ‡πà Caddy Server
</p>

<hr style="margin: 40px 0;">

<h2>6. ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ù‡∏±‡πà‡∏á Client (‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡∏û‡∏±‡∏í‡∏ô‡∏≤)</h2>
<p>
    ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å Server ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á Client (‡πÄ‡∏ä‡πà‡∏ô ‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡∏´‡∏£‡∏∑‡∏≠ GitLab Runner) ‡∏ï‡πâ‡∏≠‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏ä‡∏µ‡πâ‡∏°‡∏≤‡∏ó‡∏µ‡πà Verdaccio Server ‡πÅ‡∏ó‡∏ô npmjs.org
</p>

<h3>6.1 (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç) ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Root CA ‡∏Ç‡∏≠‡∏á Caddy</h3>
<p>
    ‡∏´‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ä‡πâ Caddy <code>tls internal</code> (HTTPS ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô) ‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ü‡∏•‡πå <code>caddy-root.crt</code> ‡∏•‡∏á‡πÉ‡∏ô Trusted Root Store ‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á Client ‡∏Å‡πà‡∏≠‡∏ô ‡πÑ‡∏°‡πà‡πÄ‡∏ä‡πà‡∏ô‡∏ô‡∏±‡πâ‡∏ô Client ‡∏à‡∏∞‡∏ü‡πâ‡∏≠‡∏á l·ªói SSL (<code>SELF_SIGNED_CERT_IN_CHAIN</code>)
</p>
<ul>
    <li><strong>Windows:</strong> <code>Import-Certificate -FilePath "C:\path\to\caddy-root.crt" -CertStoreLocation Cert:\LocalMachine\Root</code> (Run as Admin)</li>
    <li><strong>Linux:</strong> <code>sudo cp caddy-root.crt /usr/local/share/ca-certificates/</code> ‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏±‡∏ô <code>sudo update-ca-certificates</code></li>
</ul>

<h3>6.2 ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ NPM Registry ‡πÅ‡∏•‡∏∞ Login</h3>
<p>
    ‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ô‡∏µ‡πâ‡πÉ‡∏ô Terminal ‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á Client ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏≠‡∏Å‡πÉ‡∏´‡πâ `npm` ‡πÉ‡∏ä‡πâ Verdaccio Server ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô Registry ‡∏´‡∏•‡∏±‡∏Å:
</p>
<pre><code># (‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ HTTPS ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏Å‡∏±‡∏ö Caddy)
npm set registry https://npm.vecskill.ovec

# (‡∏ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏ú‡πà‡∏≤‡∏ô IP ‡∏ï‡∏£‡∏á ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ HTTP)
# npm set registry http://10.20.30.101:4873
</code></pre>

<h3>6.3 ‡∏™‡∏£‡πâ‡∏≤‡∏á User (‡∏ó‡∏≥‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å)</h3>
<p>
    ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£ Publish ‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß ‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á User ‡∏ö‡∏ô Verdaccio ‡∏Å‡πà‡∏≠‡∏ô
</p>
<pre><code># --registry ‡∏ä‡∏µ‡πâ‡πÑ‡∏õ‡∏ó‡∏µ‡πà server ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
npm adduser --registry https://npm.vecskill.ovec</code></pre>
<p>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ñ‡∏≤‡∏°‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤: Username, Password, ‡πÅ‡∏•‡∏∞ Email</p>

<h3>6.4 ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h3>
<ul>
    <li>
        <strong>‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à (Install):</strong>
        <pre><code># npm ‡∏à‡∏∞‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å Verdaccio (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ Cache) ‡∏´‡∏£‡∏∑‡∏≠‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å npmjs.org ‡∏ú‡πà‡∏≤‡∏ô Verdaccio
npm install express
npm install lodash</code></pre>
    </li>
    <li>
        <strong>‡∏Å‡∏≤‡∏£‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß (Publish):</strong>
        <pre><code># ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå Node.js ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏±‡∏ô:
npm publish</code></pre>
    </li>
</ul>

<h3>6.5 ‡∏Å‡∏≤‡∏£‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÉ‡∏ä‡πâ Registry ‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞</h3>
<p>
    ‡∏´‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÉ‡∏ä‡πâ npmjs.org ‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß ‡πÉ‡∏´‡πâ‡∏£‡∏±‡∏ô:
</p>
<pre><code>npm set registry https://registry.npmjs.org/
</code></pre>